<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Mystery Manila Mini Challenge</title>
    <link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'>	
	<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Rock+Salt' rel='stylesheet' type='text/css'>
	<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style2.css"/>
<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-49854580-1', 'mysterymanila.com');
	  ga('send', 'pageview');
   </script>
</head>
<body id = "aura">
<div id = "content">
	<h1>
		<img src="../img/mystery-logo.png" id="mmlogo" />
	</h1>
	<br>
	<br>
	<h1 id="h1_indextitle" style="font-family:LeviReBrushed;color:#FF8200"></h1>
	<p id="h1_dpstory" style="font-family:Calibri;color:white">
			<img id="img_mm2" src="img/MMA.jpg" style="text-align:center;width:100%;height:100%;"/></h1>
			<img id="img_mm" src="img/code.jpg" style="text-align:center;width:100%;height:100%;display:none"/></h1>
	</p>				
	<form action="" method="post">
		<div id="login">
			<p id="h1_dpstory" style="font-family:Calibri;color:white">
				<label>Warning: Wrong passcode will disable input for 3 minutes</label><br>
				<label style="color:white">Enter Code Here:</label>
				<br>
				<input type="text" id="inputcode" class="inputcode">			
				<br><span id="inputerror"></span>
				<br>
				<button id="submit" >Submit</button>
			<p>
		</div>	
	</form>
</div>
<script>

	if(Number(localStorage.getItem("ctr"))<0){
		var ctr = 0;
	}
	else{
		var ctr = Number(localStorage.getItem("ctr"));
	}
	//alert(ctr);
	//var ctr = 0;
	$('#img_mm').hide(1);
	$('#inputerror').hide(1);
	$('#submit').click(function(e) { //Add the 'e' event object to the parameters
		e.preventDefault();
		//console.log($('#inputcode').val());
		if ($('#inputcode').val()=="C2"){
			//alert("Correct");
			$('#img_mm2').hide(1000);	
			$('#img_mm').show(1000);					
			$('#inputcode').val("---input disabled----")
			$('#inputcode').prop('disabled', true);
			$('#inputerror').hide(100);	
		}
		else{
			//alert("Wrong");
			//$('#img_mm').show(1000);	
			timeCounter=180;
			ctr+=1;	
			var $formContainer = $('#login');
			  $formContainer.addClass('invalid');
			  setTimeout(function(){
				$formContainer.removeClass('invalid');
			  },1000);
			//$('#email').val('');		
			$('#inputcode').val('');			
			$('#inputerror').html("<br>Invalid Code! Please try again");
			$('#inputerror').show(100);
			if(ctr>=1){				
				setTimeout(function(){
					$('#inputcode').val("");
					$('#inputcode').prop('disabled', false);
					$('#inputcode').attr('placeholder', "Try Again");
					$('#submit').prop('disabled', false);
					$('#inputerror').hide(100);	
					localStorage.setItem("ctr",ctr);
					ctr=0;
				},180000);
				$('#inputcode').val("Input disabled for 3 minutes")
				$('#inputcode').prop('disabled', true);
				$('#inputerror').html('Do not refresh the browser! The penalty countdown will start again with 3 minutes');
				$('#inputerror').show(100);
				$('#submit').prop('disabled', true);
				
			}
			localStorage.setItem("ctr",ctr);
			//alert(document.cookie.ctr);
		}
		
	});
	if(ctr>=1){				
				setTimeout(function(){
					$('#inputcode').val("");
					$('#inputcode').prop('disabled', false);
					$('#inputcode').attr('placeholder', "Try Again");
					$('#submit').prop('disabled', false);
					$('#inputerror').hide(100);	
					localStorage.setItem("ctr",ctr);
					ctr=0;
				},180000);
				$('#inputcode').val("Input disabled for 3 minutes")
				$('#inputcode').prop('disabled', true);
				$('#inputerror').html('Do not refresh the browser! The penalty countdown will start again with 3 minutes');
				$('#inputerror').show(100);
				$('#submit').prop('disabled', true);
				
			}
</script>
</body>

</html>

